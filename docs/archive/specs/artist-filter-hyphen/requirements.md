# 要件定義書

## はじめに

本ドキュメントは、VTuber「幽音しの」さんの楽曲リスト表示システムにおいて、アーティスト名が「-」（ハイフン）の楽曲を画面に表示しないようにするフィルタリング機能の要件を定義します。

## 用語集

- **システム**: しのうたタイムの楽曲リスト表示システム
- **V_SONG_LIST.TSV**: 楽曲データを格納するTSVファイル
- **アーティスト名**: 楽曲のアーティスト情報を示す列
- **ハイフン**: 文字「-」
- **フィルタリング**: 特定の条件に基づいてデータを除外する処理
- **Song List betaページ**: 楽曲リストを表示するStreamlitページ（pages/99_Song_List_beta.py）

## 要件

### 要件 1

**ユーザーストーリー:** ユーザーとして、楽曲リストを閲覧する際に、アーティスト名が不明な楽曲（「-」で表示されている楽曲）を見たくないので、それらが自動的に除外されて表示されることを望みます。

#### 受入基準

1. WHEN システムがV_SONG_LIST.TSVファイルを読み込むとき THEN システムはアーティスト名が「-」である行を除外しなければならない
2. WHEN Song List betaページが楽曲リストを表示するとき THEN システムはアーティスト名が「-」の楽曲を表示してはならない
3. WHEN フィルタリング処理が実行されるとき THEN システムは元のデータファイルを変更してはならない
4. WHEN フィルタリング後の楽曲件数が表示されるとき THEN システムはフィルタリング後の正確な件数を表示しなければならない
5. WHEN アーティスト名が「-」以外の値を持つ楽曲が存在するとき THEN システムはそれらの楽曲を通常通り表示しなければならない

### 要件 2

**ユーザーストーリー:** 開発者として、フィルタリング処理が既存のコードに影響を与えないように、適切な場所で実装されることを望みます。

#### 受入基準

1. WHEN フィルタリング処理が実装されるとき THEN システムはデータ読み込み後、表示前の段階でフィルタリングを実行しなければならない
2. WHEN フィルタリング処理が実装されるとき THEN システムは既存のソート処理に影響を与えてはならない
3. WHEN フィルタリング処理が実装されるとき THEN システムは既存のHTMLテーブル生成処理に影響を与えてはならない
4. WHEN フィルタリング処理が実装されるとき THEN システムはコードの可読性を維持しなければならない
5. WHEN フィルタリング処理が実装されるとき THEN システムは適切なコメントを含めなければならない

### 要件 3

**ユーザーストーリー:** システム管理者として、フィルタリング処理が正しく動作していることを確認できるように、適切なテストが実装されることを望みます。

#### 受入基準

1. WHEN テストが実行されるとき THEN システムはアーティスト名が「-」の楽曲が除外されることを検証しなければならない
2. WHEN テストが実行されるとき THEN システムはアーティスト名が「-」以外の楽曲が保持されることを検証しなければならない
3. WHEN テストが実行されるとき THEN システムはフィルタリング後の件数が正確であることを検証しなければならない
4. WHEN テストが実行されるとき THEN システムは空のデータセットに対してエラーが発生しないことを検証しなければならない
5. WHEN テストが実行されるとき THEN システムはアーティスト名列が存在しない場合の動作を検証しなければならない
